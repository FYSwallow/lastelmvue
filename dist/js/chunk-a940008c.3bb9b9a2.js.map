{"version":3,"sources":["webpack:///./src/page/login/login.vue?83cf","webpack:///src/page/login/login.vue","webpack:///./src/page/login/login.vue?a33a","webpack:///./src/page/login/login.vue","webpack:///./src/page/login/login.vue?013d"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","goback","attrs","_v","model","value","callback","$$v","username","expression","showPassword","password","class","slot","changePassWordType","sms","captchaCodeImg","getCaptchaCode","captchaCodeLogin","alertText","showAlert","staticRenderFns","data","message","userInfo","mounted","initData","methods","$router","go","component"],"mappings":"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","file":"js/chunk-a940008c.3bb9b9a2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('header',{staticClass:\"header\"},[_c('div',{staticClass:\"header-left\",on:{\"click\":_vm.goback}},[_c('van-icon',{attrs:{\"name\":\"arrow-left\"}}),_c('span',[_vm._v(\"返回\")])],1),_c('div',{staticClass:\"header-middle\"},[_vm._v(\"用户登陆\")])]),_c('van-cell-group',{staticClass:\"login-form\"},[_c('van-field',{attrs:{\"required\":\"\",\"clearable\":\"\",\"label\":\"用户名\",\"label-width\":\"60\",\"placeholder\":\"请输入用户名\"},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}}),_c('van-field',{attrs:{\"type\":_vm.showPassword ? 'text': 'password',\"label\":\"密码\",\"label-width\":\"60\",\"placeholder\":\"请输入密码\",\"required\":\"\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}},[_c('div',{staticClass:\"button-switch\",class:{'show-password': _vm.showPassword},attrs:{\"slot\":\"button\"},slot:\"button\"},[_c('span',{staticClass:\"text\",class:[_vm.showPassword? 'text-on': 'text-off']},[_vm._v(\"abc...\")]),_c('span',{staticClass:\"show\",class:[_vm.showPassword? 'show-on': 'show-off'],on:{\"click\":_vm.changePassWordType}})])]),_c('van-field',{attrs:{\"required\":\"\",\"clearable\":\"\",\"label\":\"验证码\",\"label-width\":\"60\",\"placeholder\":\"请输入验证码\"},model:{value:(_vm.sms),callback:function ($$v) {_vm.sms=$$v},expression:\"sms\"}},[(!_vm.captchaCodeImg)?_c('van-button',{attrs:{\"slot\":\"button\",\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.getCaptchaCode},slot:\"button\"},[_vm._v(\"获取验证码\")]):_c('div',{staticClass:\"captchacode\",attrs:{\"slot\":\"button\"},slot:\"button\"},[_c('img',{staticClass:\"captchacode-img\",attrs:{\"src\":_vm.captchaCodeImg},on:{\"click\":_vm.getCaptchaCode}})])],1)],1),_c('p',{staticClass:\"login-tips\"},[_vm._v(\"温馨提示: 为注册过的账号, 登录时将自动注册\")]),_c('p',{staticClass:\"login-tips\"},[_vm._v(\"注册过的用户可凭账号密码登陆\")]),_c('button',{staticClass:\"login-button\",on:{\"click\":_vm.captchaCodeLogin}},[_vm._v(\"登录\")]),_c('router-link',{staticClass:\"to-forget\",attrs:{\"to\":\"/user/forget\"}},[_vm._v(\"重置密码?\")]),_c('van-dialog',{attrs:{\"title\":\"提示\",\"show-cancel-button\":\"\",\"message\":_vm.alertText},model:{value:(_vm.showAlert),callback:function ($$v) {_vm.showAlert=$$v},expression:\"showAlert\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"login\">\r\n    <header class=\"header\">\r\n      <div class=\"header-left\" @click=\"goback\">\r\n        <van-icon name=\"arrow-left\" />\r\n        <span>返回</span>\r\n      </div>\r\n      <div class=\"header-middle\">用户登陆</div>\r\n    </header>\r\n    <van-cell-group class=\"login-form\">\r\n      <!-- 输入用户名 -->\r\n      <van-field\r\n        v-model=\"username\"\r\n        required\r\n        clearable\r\n        label=\"用户名\"\r\n        label-width=\"60\"\r\n        placeholder=\"请输入用户名\"\r\n      />\r\n      <!-- 输入密码 -->\r\n      <van-field\r\n        v-model=\"password\"\r\n        :type=\"showPassword ? 'text': 'password'\"\r\n        label=\"密码\"\r\n        label-width=\"60\"\r\n        placeholder=\"请输入密码\"\r\n        required\r\n      >\r\n        <div class=\"button-switch\" slot=\"button\" :class=\"{'show-password': showPassword}\">\r\n          <span class=\"text\" :class=\"[showPassword? 'text-on': 'text-off']\">abc...</span>\r\n          <span\r\n            class=\"show\"\r\n            :class=\"[showPassword? 'show-on': 'show-off']\"\r\n            @click=\"changePassWordType\"\r\n          ></span>\r\n        </div>\r\n      </van-field>\r\n      <van-field v-model=\"sms\" required clearable label=\"验证码\" label-width=\"60\" placeholder=\"请输入验证码\">\r\n        <van-button\r\n          slot=\"button\"\r\n          size=\"small\"\r\n          type=\"primary\"\r\n          v-if=\"!captchaCodeImg\"\r\n          @click=\"getCaptchaCode\"\r\n        >获取验证码</van-button>\r\n        <div slot=\"button\" class=\"captchacode\" v-else>\r\n          <img :src=\"captchaCodeImg\" class=\"captchacode-img\" @click=\"getCaptchaCode\" />\r\n        </div>\r\n      </van-field>\r\n    </van-cell-group>\r\n    <p class=\"login-tips\">温馨提示: 为注册过的账号, 登录时将自动注册</p>\r\n    <p class=\"login-tips\">注册过的用户可凭账号密码登陆</p>\r\n    <button class=\"login-button\" @click=\"captchaCodeLogin\">登录</button>\r\n    <router-link to=\"/user/forget\" class=\"to-forget\">重置密码?</router-link>\r\n    <van-dialog v-model=\"showAlert\" title=\"提示\" show-cancel-button :message=\"alertText\"></van-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Notify } from \"vant\";\r\nimport { mapActions } from \"vuex\";\r\nimport { getcaptchas, accountLogin } from \"@/api/index\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      message: \"\", //提示信息\r\n      username: null, //账号\r\n      password: null, //密码\r\n      showPassword: false, //是否显示密码\r\n      sms: null, //验证码\r\n      captchaCodeImg: null, //验证码地址\r\n      showAlert: false, //显示提示组件\r\n      alertText: null, //提示的内容\r\n      userInfo: null //获取到的用户信息\r\n    };\r\n  },\r\n  mounted() {\r\n    this.initData();\r\n  },\r\n  methods: {\r\n    ...mapActions([\"getUserInfo\"]),\r\n\r\n    //  查看是否存在sid,如果存在,则通过cookies获取用户信息,如果获取失败,删除sid\r\n    initData() {},\r\n    // 获取验证码\r\n    async getCaptchaCode() {\r\n      const result = await getcaptchas();\r\n      this.captchaCodeImg = result.data.code;\r\n    },\r\n    //是否显示密码\r\n    changePassWordType() {\r\n      this.showPassword = !this.showPassword;\r\n    },\r\n    async captchaCodeLogin() {\r\n      if (!this.username) {\r\n        this.showAlert = true;\r\n        this.alertText = \"请输入手机号/邮箱/用户名\";\r\n        return;\r\n      } else if (!this.password) {\r\n        this.showAlert = true;\r\n        this.alertText = \"请输入密码\";\r\n        return;\r\n      } else if (!this.sms) {\r\n        this.showAlert = true;\r\n        this.alertText = \"请输入验证码\";\r\n        return;\r\n      }\r\n      // 用户名登录\r\n      const result = await accountLogin(this.username, this.password, this.sms);\r\n      console.log(result);\r\n      const userInfo = result.data.data;\r\n      if (!userInfo.user_id) {\r\n        Notify({\r\n          type: \"danger\",\r\n          message: \"请检查密码和用户名是否匹配\"\r\n        });\r\n        return;\r\n      } else {\r\n        // 将userInfo保存至全局状态管理\r\n        this.getUserInfo(userInfo);\r\n        Notify({\r\n          type: \"success\",\r\n          message: \"登陆成功\",\r\n          duration: 1000\r\n        });\r\n        setTimeout(() => {\r\n          // 跳转路由\r\n          this.$router.go(-1);\r\n        }, 1000);\r\n      }\r\n    },\r\n    goback() {\r\n      this.$router.go(-1);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.login {\r\n  .header {\r\n    position: relative;\r\n    height: 50px;\r\n    color: #fff;\r\n    line-height: 50px;\r\n    background-color: #01a3f8;\r\n    .header-left {\r\n      height: 100%;\r\n    }\r\n    .header-middle {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 50%;\r\n      transform: translateX(-50%);\r\n    }\r\n  }\r\n  .login-form {\r\n    .button-switch {\r\n      position: relative;\r\n      margin: 0 10px;\r\n      line-height: 24px;\r\n      .text {\r\n        font-size: 14px;\r\n        line-height: 14px;\r\n        color: #fff;\r\n        border-radius: 7px;\r\n      }\r\n      .text-on {\r\n        background-color: #4cd964;\r\n      }\r\n      .text-off {\r\n        background-color: #ddd;\r\n      }\r\n      .show {\r\n        position: absolute;\r\n        left: 0;\r\n        width: 24px;\r\n        height: 24px;\r\n        border-radius: 17px;\r\n        background-color: #eee;\r\n        transition: all 0.2s linear;\r\n      }\r\n      .show-off {\r\n        transform: translateX(20px);\r\n      }\r\n      .show-on {\r\n        transform: translateX(-8px);\r\n      }\r\n    }\r\n    .captchacode {\r\n      height: 30px;\r\n      .captchacode-img {\r\n        width: 100%;\r\n      }\r\n    }\r\n  }\r\n  .login-tips {\r\n    color: red;\r\n    padding: 10px;\r\n    font-size: 14px;\r\n  }\r\n  .login-button {\r\n    width: 90%;\r\n    height: 45px;\r\n    margin: 5px 20px;\r\n    font-size: 25px;\r\n    color: #fff;\r\n    border: none;\r\n    border-radius: 5px;\r\n    background-color: #4cd964;\r\n  }\r\n\r\n  .to-forget {\r\n    float: right;\r\n    color: #3b95e9;\r\n    margin-right: 20px;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=e44994d0&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=e44994d0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e44994d0\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=e44994d0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=e44994d0&lang=scss&scoped=true&\""],"sourceRoot":""}