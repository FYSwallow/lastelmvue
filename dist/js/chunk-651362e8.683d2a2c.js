(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-651362e8"],{"25f0":function(t,e,s){"use strict";var i=s("6eeb"),a=s("825a"),n=s("d039"),r=s("ad6d"),c="toString",o=RegExp.prototype,u=o[c],l=n((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=u.name!=c;(l||d)&&i(RegExp.prototype,c,(function(){var t=a(this),e=String(t.source),s=t.flags,i=String(void 0===s&&t instanceof RegExp&&!("flags"in o)?r.call(t):s);return"/"+e+"/"+i}),{unsafe:!0})},"498a":function(t,e,s){"use strict";var i=s("23e7"),a=s("58a8").trim,n=s("e070");i({target:"String",proto:!0,forced:n("trim")},{trim:function(){return a(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var i=s("1d80"),a=s("5899"),n="["+a+"]",r=RegExp("^"+n+n+"*"),c=RegExp(n+n+"*$"),o=function(t){return function(e){var s=String(i(e));return 1&t&&(s=s.replace(r,"")),2&t&&(s=s.replace(c,"")),s}};t.exports={start:o(1),end:o(2),trim:o(3)}},"74cc":function(t,e,s){},"941e":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"address"},[s("header",{staticClass:"search"},[s("div",{staticClass:"search-left",on:{click:t.goCityList}},[s("span",{staticClass:"ellipsis"},[t._v(t._s(t.currentPosition))]),s("van-icon",{staticClass:"icon",staticStyle:{transform:"rotate(90deg)"},attrs:{name:"play"}})],1),s("div",{staticClass:"search-right"},[s("van-search",{attrs:{placeholder:"请输入地址",shape:"round","show-action":""},on:{search:t.onSearch},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[s("div",{attrs:{slot:"action"},on:{click:t.onSearch},slot:"action"},[t._v("搜索")])])],1)]),s("section",{directives:[{name:"show",rawName:"v-show",value:!t.searchShow,expression:"!searchShow"}],staticClass:"main-container"},[s("div",{staticClass:"current-position"},[t._m(0),s("div",{staticClass:"current-position-detail"},[s("div",{staticClass:"detail-left ellipsis"},[s("span",[t._v(t._s(t.positionDetail))])]),s("div",{staticClass:"detail-right"},[s("van-icon",{staticClass:"icon-position",attrs:{name:"aim",color:"#01a3f8"}}),s("span",{on:{click:t.getPosition}},[t._v("重新定位")])],1)])]),s("div",{staticClass:"get-product-address"},[s("div",{staticClass:"title"},[t._v("收货地址")]),s("ul",{staticClass:"address-group"},t._l(t.getFoodAddressList,(function(e,i){return s("li",{key:i,staticClass:"address-list"},[s("div",{staticClass:"list-top"},[s("span",{staticClass:"name"},[t._v(t._s(e.name))]),s("span",{staticClass:"gender"},[t._v(t._s(1==e.sex?"女士":"先生"))]),s("span",{staticClass:"telphone"},[t._v(t._s(e.phone))])]),s("div",{staticClass:"list-bottom"},[s("span",{staticClass:"address-detail"},[t._v(t._s(e.address))])])])})),0)])]),s("section",{directives:[{name:"show",rawName:"v-show",value:t.searchShow,expression:"searchShow"}],staticClass:"search-container"},[s("ul",{staticClass:"search-address"},t._l(t.searchCityList,(function(e,i){return s("li",{key:i,staticClass:"address-list",on:{click:function(s){return t.choosePosition(e)}}},[s("div",{staticClass:"list-left"},[s("h3",{staticClass:"title"},[t._v(t._s(e.name))]),s("p",{staticClass:"detail"},[t._v(t._s(e.address))])]),s("div",{staticClass:"list-right"},[s("span",{staticClass:"distance"},[t._v(t._s(e.distance))])])])})),0),t._m(1)])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"current-position-title title"},[s("span",[t._v("当前地址")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"no-address"},[s("h3",{staticClass:"title"},[t._v("找不到地址？")]),s("p",{staticClass:"promt"},[t._v("请尝试只输入小区、写字楼或学校名")]),s("p",{staticClass:"promt"},[t._v("详细地址（如门牌号）可稍后输入")])])}],n=(s("a4d3"),s("4de4"),s("c975"),s("fb6a"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("d3b7"),s("25f0"),s("498a"),s("159b"),s("96cf"),s("1da1")),r=s("ade3"),c=s("2f62"),o=s("365c"),u=s("2241");function l(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function d(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?l(Object(s),!0).forEach((function(e){Object(r["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var h={data:function(){return{searchShow:!1,value:"",cityid:"",positionDetail:"",searchCityList:[],latitude:"",longitude:"",selectPosition:null,currentPosition:"定位不准",searchStatus:!1,getFoodAddressList:[]}},computed:d({},Object(c["c"])(["cityInfo","userInfo","location"])),mounted:function(){this.initData()},methods:d({},Object(c["b"])(["getCityInfo","getAddressInfo"]),{initData:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.positionDetail=this.location.address,this.cityInfo){t.next=12;break}return t.next=4,Object(o["q"])();case 4:e=t.sent,this.getCityInfo(e.data),this.cityid=e.data.id,this.currentPosition=e.data.name,this.latitude=e.data.latitude,this.longitude=e.data.longitude,t.next=16;break;case 12:this.cityid=this.cityInfo.id,this.currentPosition=this.cityInfo.name,this.latitude=this.cityInfo.latitude,this.longitude=this.cityInfo.longitude;case 16:this.getFoodAddress();case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onSearch:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.value.trim(),!e){t.next=7;break}return t.next=4,Object(o["v"])(this.cityid,e);case 4:s=t.sent,this.searchCityList=s.data,this.searchCityList.forEach((function(t){i.getDistance(t)}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getDistance:function(t){var e,s=t.latitude,i=t.longitude,a=this.latitude*Math.PI/180,n=s*Math.PI/180,r=this.longitude*Math.PI/180,c=i*Math.PI/180,o=2*Math.asin(Math.sqrt(Math.pow(Math.sin((a-n)/2),2)+Math.cos(a)*Math.cos(n)*Math.pow(Math.sin((r-c)/2),2)));if(o*=6378.137,o=Math.round(1e4*o)/1e4,o>1){var u=o.toString(),l=u.indexOf(".");e=u.slice(0,l+2),t.distance=e+"km"}else{var d=1e3*o;t.distance=d+"m"}this.searchShow=!0},choosePosition:function(t){console.log(t),this.getAddressInfo(t),console.log(this.location),this.$router.push("/home")},getPosition:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.searchStatus=!0,t.next=3,Object(o["r"])();case 3:e=t.sent,this.getAddressInfo(e.data),this.searchStatus=!1,this.positionDetail=e.data.address;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goCityList:function(){this.$router.push("/city")},getFoodAddress:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.userInfo){t.next=4;break}u["a"].confirm({message:"还未登陆,是否前去登陆?"}).then((function(){e.$router.push("/login")})),t.next=7;break;case 4:return t.next=6,Object(o["t"])(this.userInfo.user_id);case 6:this.getFoodAddressList=t.sent;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()})},f=h,p=(s("d5ea"),s("2877")),v=Object(p["a"])(f,i,a,!1,null,"0a482fea",null);e["default"]=v.exports},ad6d:function(t,e,s){"use strict";var i=s("825a");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},c975:function(t,e,s){"use strict";var i=s("23e7"),a=s("4d64").indexOf,n=s("b301"),r=[].indexOf,c=!!r&&1/[1].indexOf(1,-0)<0,o=n("indexOf");i({target:"Array",proto:!0,forced:c||o},{indexOf:function(t){return c?r.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})},d5ea:function(t,e,s){"use strict";var i=s("74cc"),a=s.n(i);a.a},e070:function(t,e,s){var i=s("d039"),a=s("5899"),n="​᠎";t.exports=function(t){return i((function(){return!!a[t]()||n[t]()!=n||a[t].name!==t}))}},fb6a:function(t,e,s){"use strict";var i=s("23e7"),a=s("861d"),n=s("e8b5"),r=s("23cb"),c=s("50c4"),o=s("fc6a"),u=s("8418"),l=s("1dde"),d=s("b622"),h=d("species"),f=[].slice,p=Math.max;i({target:"Array",proto:!0,forced:!l("slice")},{slice:function(t,e){var s,i,l,d=o(this),v=c(d.length),g=r(t,v),m=r(void 0===e?v:e,v);if(n(d)&&(s=d.constructor,"function"!=typeof s||s!==Array&&!n(s.prototype)?a(s)&&(s=s[h],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return f.call(d,g,m);for(i=new(void 0===s?Array:s)(p(m-g,0)),l=0;g<m;g++,l++)g in d&&u(i,l,d[g]);return i.length=l,i}})}}]);
//# sourceMappingURL=chunk-651362e8.683d2a2c.js.map