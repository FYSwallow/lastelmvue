(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b7a1b874"],{"07ac":function(t,e,s){var a=s("23e7"),r=s("6f53").values;a({target:"Object",stat:!0},{values:function(t){return r(t)}})},"6f53":function(t,e,s){var a=s("83ab"),r=s("df75"),i=s("fc6a"),c=s("d1e7").f,n=function(t){return function(e){var s,n=i(e),o=r(n),d=o.length,l=0,u=[];while(d>l)s=o[l++],a&&!c.call(n,s)||u.push(t?[s,n[s]]:n[s]);return u}};t.exports={entries:n(!0),values:n(!1)}},"8bef":function(t,e,s){"use strict";var a=s("d97b"),r=s.n(a);r.a},"9e0a":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"confirmOrder"},[s("header",{staticClass:"confirm-header"},[s("div",{staticClass:"header-left",on:{click:t.goBack}},[s("van-icon",{attrs:{name:"arrow-left"}})],1),t._m(0)]),s("section",{staticClass:"confirm-container"},[s("section",{staticClass:"send-position card",on:{click:t.addAddress}},[t.userInfo?t.chooseAddress?s("div",{staticClass:"address-detail-container"},[s("div",{staticClass:"address-left"},[s("van-icon",{attrs:{name:"location-o"}})],1),s("div",{staticClass:"address-right"},[s("header",[s("span",[t._v(t._s(t.chooseAddress.name))]),s("span",[t._v(t._s(1==t.chooseAddress.sex?"先生":"女士"))]),s("span",[t._v(t._s(t.chooseAddress.phone))])]),s("div",{staticClass:"address-detail"},[s("span",{style:{backgroundColor:t.iconColor(t.chooseAddress.tag)}},[t._v(t._s(t.chooseAddress.tag))]),s("p",[t._v(t._s(t.chooseAddress.address+t.chooseAddress.address_detail))])])])]):s("div",{staticClass:"add-address"},[s("span",{staticClass:"image-location"},[s("van-icon",{attrs:{name:"add-o"}})],1),s("span",[t._v("请添加一个地址")])]):s("div",{staticClass:"add-address"},[s("span",[t._v("请先前去登录")])]),s("div",{staticClass:"address-choose"},[s("van-icon",{attrs:{name:"arrow"}})],1)]),s("div",{staticClass:"line"}),s("section",{staticClass:"card send-time flex"},[s("div",{staticClass:"time-left weight"},[t._v("送达时间")]),s("div",{staticClass:"time-right"},[t.checkoutData?s("span",[t._v("尽快送达 | 预计 "+t._s(t.checkoutData.delivery_reach_time))]):t._e()])]),s("section",{staticClass:"card pay-methods flex"},[s("div",{staticClass:"pay-left weight"},[t._v("支付方式")]),s("div",{staticClass:"pay-right"},[s("span",[t._v("在线支付")]),s("van-icon",{attrs:{name:"arrow"}})],1)]),s("section",{staticClass:"food card"},[t.checkoutData?s("header",{staticClass:"shop-name weight border"},[s("span",[t._v(t._s(t.checkoutData.cart.restaurant_info.name))])]):t._e(),t.checkoutData?s("ul",{staticClass:"food-detail"},t._l(t.checkoutData.cart.groups[0],(function(e){return s("li",{key:e.id,staticClass:"list flex"},[s("div",{staticClass:"food-name"},[t._v(t._s(e.name))]),s("div",{staticClass:"food-num"},[t._v("x "+t._s(e.quantity))]),s("div",{staticClass:"food-price weight"},[t._v("¥"+t._s(e.price))])])})),0):t._e(),t.checkoutData?s("div",{staticClass:"box-price list flex"},[s("div",{staticClass:"box-left"},[t._v(t._s(t.checkoutData.cart.extra[0].name)+"费")]),s("div",{staticClass:"box-right weight"},[t._v("¥ "+t._s(t.checkoutData.cart.extra[0].price))])]):t._e(),t.checkoutData?s("div",{staticClass:"delivery list flex border"},[t._m(1),s("div",{staticClass:"delivery-right weight"},[t._v("¥ "+t._s(t.checkoutData.cart.deliver_amount||0))])]):t._e(),s("div",{staticClass:"hongbao list flex border"},[s("div",{staticClass:"hongbao-left weight"},[t._v("红包/抵用券")]),s("div",{staticClass:"hongbao-right"},[s("span",[t._v("无可用红包")]),s("van-icon",{attrs:{name:"arrow"}})],1)]),t.checkoutData?s("div",{staticClass:"pay-money list flex"},[s("div",{staticClass:"pay-left"}),s("div",{staticClass:"pay-right"},[s("span",[t._v("小计")]),s("span",{staticClass:"weight pay-price"},[t._v("¥"+t._s(t.checkoutData.cart.total))])])]):t._e()]),s("section",{staticClass:"remarks card"},[s("div",{staticClass:"order-remark flex base",on:{click:t.writeRemark}},[s("div",{staticClass:"remark-left weight"},[t._v("订单备注")]),s("div",{staticClass:"remark-right choose"},[s("span",[t._v("口味、偏好")]),s("van-icon",{class:{"arrow-icon":t.showRemark},attrs:{name:"arrow"}})],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showRemark,expression:"showRemark"}],staticClass:"remark-detail"},[s("van-field",{attrs:{rows:"1",autosize:"",label:"备注",type:"textarea",placeholder:"请输入备注内容"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),s("div",{staticClass:"tableware flex base",on:{click:t.showPopup}},[s("div",{staticClass:"tableware-left weight"},[t._v("餐具份数")]),s("div",{staticClass:"tableware-right choose"},[s("span",[t._v(t._s(t.tablewareNum))]),s("van-icon",{attrs:{name:"arrow"}})],1)]),s("van-popup",{style:{height:"30%"},attrs:{closeable:"",position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("van-picker",{attrs:{"show-toolbar":"",columns:t.columns,title:"选择本单餐具"},on:{cancel:t.onCancel,confirm:t.onConfirm}})],1),t._m(2)],1)]),t.checkoutData?s("footer",{staticClass:"confirm-pay"},[s("div",{staticClass:"footer-left"},[t._v("待支付 ¥"+t._s(t.checkoutData.cart.total))]),s("div",{staticClass:"footer-right",on:{click:t.confrimOrder}},[t._v("确认下单")])]):t._e()])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header-middle"},[s("span",[t._v("确认订单")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"delivery-left"},[s("span",[t._v("配送费*")]),s("span",[t._v("蜂鸟配送")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"invoice flex base"},[s("div",{staticClass:"invoice-left weight"},[t._v("发票信息")]),s("div",{staticClass:"invoice-right choose"},[t._v("该店不支持线上开票，请电话联系商户")])])}],i=(s("a4d3"),s("4de4"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("07ac"),s("159b"),s("96cf"),s("1da1")),c=s("ade3"),n=s("2f62"),o=s("365c"),d=s("f564");function l(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function u(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?l(Object(s),!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var h={data:function(){return{showList:!1,restaurant_id:0,shopCart:null,checkoutData:null,showRemark:!1,message:"",show:!1,columns:["无需餐具","1份","2份","3份","4份","5份"],tablewareNum:"1份"}},computed:u({},Object(n["c"])(["cartList","userInfo","chooseAddress","geohash"])),created:function(){this.restaurant_id=this.$route.query.restaurant_id,this.shopCart=this.cartList[this.restaurant_id]},mounted:function(){this.initData()},methods:u({},Object(n["b"])(["selectAddress"]),{goBack:function(){this.$router.go(-1)},initData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new Array,Object.values(this.shopCart).forEach((function(t){Object.values(t).forEach((function(t){Object.values(t).forEach((function(t){e.push({attrs:[],extra:{},id:t.id,name:t.name,packing_fee:t.packing_fee,price:t.price,quantity:t.num,sku_id:t.sku_id,specs:[t.specs],stock:t.stock})}))}))})),t.next=4,Object(o["d"])(this.geohash,[e],this.restaurant_id);case 4:s=t.sent,this.checkoutData=s.data,this.initAddress();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),initAddress:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.userInfo||!this.userInfo.user_id||this.chooseAddress){t.next=5;break}return t.next=3,Object(o["t"])(this.userInfo.user_id);case 3:e=t.sent,e.data.data instanceof Array&&e.data.data.length&&(console.log(1),this.selectAddress(e.data.data[0]));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),iconColor:function(t){switch(t){case"公司":return"#4cd964";case"学校":return"#3190e8"}},addAddress:function(){this.userInfo?this.$router.push({path:"/user/editAddress",query:{restaurant_id:this.restaurant_id}}):this.$router.push("/login")},writeRemark:function(){this.showRemark=!this.showRemark},showPopup:function(){this.show=!0},onConfirm:function(t,e){this.tablewareNum=t,this.show=!1},onCancel:function(){this.show=!1},confrimOrder:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.userInfo){t.next=5;break}return Object(d["a"])({type:"danger",message:"抱歉,您还未登陆"}),t.abrupt("return");case 5:if(this.chooseAddress){t.next=8;break}return Object(d["a"])({type:"danger",message:"抱歉,你还未选择收货地址"}),t.abrupt("return");case 8:return t.next=10,Object(o["m"])(this.userInfo.user_id,this.checkoutData.cart.id,this.chooseAddress.id,this.remarklist,this.checkoutData.cart.groups,this.geohash,this.checkoutData.sig);case 10:t.sent,this.$router.push("/confirmOrder/payment");case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()})},f=h,v=(s("8bef"),s("2877")),p=Object(v["a"])(f,a,r,!1,null,"1faa2043",null);e["default"]=p.exports},d97b:function(t,e,s){}}]);
//# sourceMappingURL=chunk-b7a1b874.8fdfa78c.js.map