{"version":3,"sources":["webpack:///./src/components/footer/footer.vue?4f77","webpack:///src/components/footer/footer.vue","webpack:///./src/components/footer/footer.vue?9959","webpack:///./src/components/footer/footer.vue","webpack:///./src/components/footer/footer.vue?14d8","webpack:///./src/page/home/home.vue?bb3d","webpack:///src/page/home/home.vue","webpack:///./src/page/home/home.vue?210b","webpack:///./src/page/home/home.vue","webpack:///./src/page/home/home.vue?db86"],"names":["render","_vm","this","_h","$createElement","_c","_self","model","value","callback","$$v","active","expression","attrs","_v","staticRenderFns","component","ref","staticClass","on","handleScroll","directives","name","rawName","location","getCity","show","style","position","positionStatus","goCity","_s","positionText","staticStyle","foodTypes","length","_l","item","index","key","id","path","query","geohash","title","restaurant_category_id","getCategoryId","link","imgBaseUrl","image_url","_e","class","typeFlag","changeStyle","slot","loadMoreFlag","showCover","closeCover","components","vFood","vShoplist","vFooter","data","showStatus","loading","foodPosition","categoryNavheight","topNavheight","shopListHeight","computed","watch","foodInfo","sortBy","mounted","initData","methods","address","latitude","longitude","getFoodTypesArr","$refs","positionTop","offsetHeight","scrollTop","food","offsetTop","document","body","clientHeight","scrollHeight","home","getShoplistHeight","height","getFoodInfo","$router","push"],"mappings":"kHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,aAAa,CAACE,MAAM,CAACC,MAAOP,EAAU,OAAEQ,SAAS,SAAUC,GAAMT,EAAIU,OAAOD,GAAKE,WAAW,WAAW,CAACP,EAAG,kBAAkB,CAACQ,MAAM,CAAC,KAAO,SAAS,GAAK,QAAQ,KAAO,UAAU,CAACZ,EAAIa,GAAG,QAAQT,EAAG,kBAAkB,CAACQ,MAAM,CAAC,KAAO,iBAAiB,GAAK,SAAS,KAAO,WAAW,CAACZ,EAAIa,GAAG,QAAQT,EAAG,kBAAkB,CAACQ,MAAM,CAAC,KAAO,YAAY,GAAK,aAAa,KAAO,eAAe,CAACZ,EAAIa,GAAG,SAAS,IAChfC,EAAkB,GCQtB,GACE,KADF,WAEI,MAAJ,CACM,OAAN,oBCZ+V,I,wBCQ3VC,EAAY,eACd,EACAhB,EACAe,GACA,EACA,KACA,WACA,MAIa,OAAAC,E,oECnBf,yBAAwjB,EAAG,G,gECA3jB,IAAIhB,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACY,IAAI,OAAOC,YAAY,OAAOL,MAAM,CAAC,GAAK,QAAQM,GAAG,CAAC,OAASlB,EAAImB,eAAe,CAACf,EAAG,MAAM,CAACgB,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASf,OAAQP,EAAIuB,SAAUZ,WAAW,eAAe,CAACP,EAAG,aAAa,CAACQ,MAAM,CAAC,MAAQ,KAAK,qBAAqB,GAAG,qBAAqB,MAAM,sBAAsB,IAAI,QAAU,kBAAkBM,GAAG,CAAC,QAAUlB,EAAIwB,SAASlB,MAAM,CAACC,MAAOP,EAAQ,KAAEQ,SAAS,SAAUC,GAAMT,EAAIyB,KAAKhB,GAAKE,WAAW,WAAW,GAAGP,EAAG,SAAS,CAACa,YAAY,eAAeS,MAAM,CAAEC,SAAU3B,EAAI4B,iBAAkB,CAACxB,EAAG,MAAM,CAACgB,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASf,MAAOP,EAAc,WAAEW,WAAW,eAAeK,IAAI,cAAcC,YAAY,wBAAwBC,GAAG,CAAC,MAAQlB,EAAI6B,SAAS,CAACzB,EAAG,WAAW,CAACa,YAAY,OAAOL,MAAM,CAAC,KAAO,cAAcR,EAAG,OAAO,CAACJ,EAAIa,GAAGb,EAAI8B,GAAG9B,EAAI+B,iBAAiB3B,EAAG,WAAW,CAACa,YAAY,OAAOe,YAAY,CAAC,UAAY,iBAAiBpB,MAAM,CAAC,KAAO,WAAW,GAAGR,EAAG,MAAM,CAACa,YAAY,mBAAmB,CAACb,EAAG,WAAW,CAAC4B,YAAY,CAAC,UAAY,mBAAmBpB,MAAM,CAAC,KAAO,YAAYR,EAAG,cAAc,CAACQ,MAAM,CAAC,GAAK,UAAU,IAAM,SAAS,CAACZ,EAAIa,GAAG,gBAAgB,KAAKT,EAAG,UAAU,CAACa,YAAY,oBAAoB,CAACb,EAAG,MAAM,CAAC4B,YAAY,CAAC,SAAW,WAAW,MAAQ,IAAI,OAAS,KAAKpB,MAAM,CAAC,MAAQ,6BAA6B,cAAc,iCAAiC,CAACR,EAAG,OAAO,CAACA,EAAG,SAAS,CAACQ,MAAM,CAAC,GAAK,cAAc,CAACR,EAAG,SAAS,CAACQ,MAAM,CAAC,GAAK,MAAM,GAAK,MAAM,EAAI,MAAM,OAAS,OAAO,eAAe,IAAI,KAAO,UAAUR,EAAG,OAAO,CAAC4B,YAAY,CAAC,KAAO,OAAO,eAAe,IAAI,OAAS,OAAO,UAAY,uBAAuBpB,MAAM,CAAC,MAAQ,MAAM,OAAS,eAAiBZ,EAAIiC,UAAUC,OAA0P9B,EAAG,MAAM,CAACa,YAAY,UAAU,CAAEjB,EAAIiC,UAAgB,OAAE7B,EAAG,YAAY,CAACQ,MAAM,CAAC,SAAW,IAAK,kBAAkB,YAAYZ,EAAImC,GAAInC,EAAa,WAAE,SAASoC,EAAKC,GAAO,OAAOjC,EAAG,iBAAiB,CAACkC,IAAID,GAAO,CAACjC,EAAG,KAAK,CAACa,YAAY,SAASjB,EAAImC,GAAG,GAAO,SAAS5B,GAAO,OAAOH,EAAG,KAAK,CAACkC,IAAI/B,EAAMgC,GAAGtB,YAAY,cAAc,CAACb,EAAG,cAAc,CAACQ,MAAM,CAAC,GAAK,CAAC4B,KAAM,QAASC,MAAO,CAACC,QAAS1C,EAAI0C,QAASC,MAAOpC,EAAMoC,MAAOC,uBAAwB5C,EAAI6C,cAActC,EAAMuC,UAAU,CAAC1C,EAAG,MAAM,CAACQ,MAAM,CAAC,IAAMZ,EAAI+C,WAAaxC,EAAMyC,aAAa5C,EAAG,OAAO,CAACJ,EAAIa,GAAGb,EAAI8B,GAAGvB,EAAMoC,aAAa,MAAK,QAAO,GAAG3C,EAAIiD,MAAM,GAAl1B7C,EAAG,MAAM,CAACa,YAAY,kBAAkB,CAACb,EAAG,KAAK,CAACa,YAAY,SAASjB,EAAImC,GAAG,GAAI,SAASC,GAAM,OAAOhC,EAAG,KAAK,CAACkC,IAAIF,EAAKnB,YAAY,cAAc,CAACb,EAAG,MAAM,CAACa,YAAY,aAAa,CAACb,EAAG,MAAM,CAACQ,MAAM,CAAC,aAAa,uBAAsB,OAA2mBZ,EAAIiC,UAAgB,OAAE7B,EAAG,UAAU,CAACY,IAAI,OAAOC,YAAY,OAAOiC,MAAM,CAAClD,EAAImD,SAAS,aAAa,kBAAkB,CAAC/C,EAAG,SAAS,CAACc,GAAG,CAAC,YAAclB,EAAIoD,cAAc,CAAChD,EAAG,KAAK,CAACa,YAAY,aAAaL,MAAM,CAAC,KAAO,aAAayC,KAAK,aAAa,CAACrD,EAAIa,GAAG,mBAAmB,GAAGb,EAAIiD,KAAMjD,EAAY,SAAEI,EAAG,aAAa,CAACa,YAAY,WAAWL,MAAM,CAAC,aAAeZ,EAAIsD,gBAAgBtD,EAAIiD,KAAK7C,EAAG,YAAYA,EAAG,cAAc,CAACQ,MAAM,CAAC,KAAOZ,EAAIuD,WAAWrC,GAAG,CAAC,MAAQlB,EAAIwD,eAAe,IACviG1C,EAAkB,G,gwBC6FtB,OACE2C,WAAY,CACVC,MAAJ,OACIC,UAAJ,OACIC,QAAJ,QAEEC,KANF,WAOI,MAAO,CACLjC,eAAgB,WAChBkC,YAAY,EACZrC,MAAM,EACNM,aAAc,UACdgB,WAAY,8BACZd,UAAW,GACXS,QAAS,GACTqB,SAAS,EACTC,aAAc,WACdC,kBAAmB,EACnBC,aAAc,GACdf,UAAU,EACVI,WAAW,EACXY,eAAgB,GAChBb,aAAc,IAGlBc,SAAU,EAAZ,GACA,yCAEEC,MAAO,CACLC,SAAU,SAAd,OAEA,WAEQrE,KAAKsD,YADHgB,IAORC,QAvCF,WAwCIvE,KAAKwE,YAEPC,QAAS,EAAX,GACA,iDADA,CAEID,SAFJ,WAGUxE,KAAKsB,WACPtB,KAAK8B,aAAe9B,KAAKsB,SAASoD,QAClC1E,KAAKyC,QAAUzC,KAAKsB,SAASqD,SAAW,IAAM3E,KAAKsB,SAASsD,UAC5D5E,KAAK6E,gBAAgB7E,KAAKyC,WAI9BvB,aAVJ,WAYWlB,KAAKiE,eACRjE,KAAKiE,aAAejE,KAAK8E,MAAMC,YAAYC,cAG7C,IAAN,4BACA,+BACUC,EAAYjF,KAAKiE,cACnBjE,KAAK2B,eAAiB,QACtB3B,KAAK6D,YAAa,IAElB7D,KAAK2B,eAAiB,WACtB3B,KAAK6D,YAAa,GAIU,GAA1B7D,KAAKgE,oBACPhE,KAAKgE,kBAAoBhE,KAAK8E,MAAMI,KAAKC,WAGvCF,EAAYjF,KAAKgE,kBACnBhE,KAAKkD,UAAW,EAEhBlD,KAAKkD,UAAW,EAGdkC,SAASC,KAAKC,aAAeL,GAAaM,GAC5CvF,KAAKqD,gBAIT,QA1CJ,sKA2CA,8BA3CA,SA4CA,iBA5CA,UA4CA,EA5CA,OA6CA,SACA,eACA,UA/CA,wBAgDA,+BAhDA,2BAmDA,4BAnDA,QAsDA,wCAEA,mCAGA,uBACA,2BA5DA,yGA+DI,gBA/DJ,oEA+DA,GA/DA,mHAgEA,kBAhEA,OAsEA,IANA,EAhEA,OAkEA,SACA,WACA,EApEA,eAoEA,GACA,KACA,qBACA,mBAEA,iBACA,4BA1EA,0GA8EIF,YA9EJ,WAgFoC,GAA1BnD,KAAKgE,oBACPhE,KAAKgE,kBAAoBhE,KAAK8E,MAAMI,KAAKC,WAI3CnF,KAAKkD,UAAW,EAEhBlD,KAAK8E,MAAMU,KAAKP,UAAYjF,KAAKgE,kBAAoB,GAGvDyB,kBA1FJ,SA0FA,GACMzF,KAAKkE,eAAiBwB,GAGxBnC,WA9FJ,WA+FMvD,KAAKsD,WAAY,EACjBtD,KAAK2F,eAEP/D,OAlGJ,WAmGM5B,KAAK4F,QAAQC,KAAK,aAGpBjD,cAtGJ,SAsGA,QC9O6V,I,wBCQzV9B,EAAY,eACd,EACAhB,EACAe,GACA,EACA,KACA,WACA,MAIa,aAAAC,E,2CCnBf,yBAAsjB,EAAG","file":"js/chunk-72efbc30.1207129e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('van-tabbar',{model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},[_c('van-tabbar-item',{attrs:{\"icon\":\"home-o\",\"to\":\"/home\",\"name\":\"/home\"}},[_vm._v(\"首页\")]),_c('van-tabbar-item',{attrs:{\"icon\":\"balance-list-o\",\"to\":\"/order\",\"name\":\"/order\"}},[_vm._v(\"订单\")]),_c('van-tabbar-item',{attrs:{\"icon\":\"setting-o\",\"to\":\"/user/main\",\"name\":\"/user/main\"}},[_vm._v(\"我的\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <van-tabbar v-model=\"active\">\r\n        <van-tabbar-item icon=\"home-o\" to=\"/home\" name=\"/home\">首页</van-tabbar-item>\r\n        <van-tabbar-item icon=\"balance-list-o\" to=\"/order\" name=\"/order\">订单</van-tabbar-item>\r\n        <van-tabbar-item icon=\"setting-o\" to=\"/user/main\" name=\"/user/main\">我的</van-tabbar-item>\r\n    </van-tabbar>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            active: this.$route.path\r\n        };\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.active {\r\n    color: #01a3f8;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./footer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./footer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./footer.vue?vue&type=template&id=5b69ea1b&scoped=true&\"\nimport script from \"./footer.vue?vue&type=script&lang=js&\"\nexport * from \"./footer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./footer.vue?vue&type=style&index=0&id=5b69ea1b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b69ea1b\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./footer.vue?vue&type=style&index=0&id=5b69ea1b&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./footer.vue?vue&type=style&index=0&id=5b69ea1b&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"home\",staticClass:\"home\",attrs:{\"id\":\"home\"},on:{\"scroll\":_vm.handleScroll}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.location),expression:\"!location\"}]},[_c('van-dialog',{attrs:{\"title\":\"标题\",\"show-cancel-button\":\"\",\"cancel-button-text\":\"不允许\",\"confirm-button-text\":\"好\",\"message\":\"'饿了么'想获取您的当前位置\"},on:{\"confirm\":_vm.getCity},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}})],1),_c('header',{staticClass:\"position-nav\",style:({position: _vm.positionStatus})},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showStatus),expression:\"showStatus\"}],ref:\"positionTop\",staticClass:\"position-top ellipsis\",on:{\"click\":_vm.goCity}},[_c('van-icon',{staticClass:\"icon\",attrs:{\"name\":\"location\"}}),_c('span',[_vm._v(_vm._s(_vm.positionText))]),_c('van-icon',{staticClass:\"icon\",staticStyle:{\"transform\":\"rotate(90deg)\"},attrs:{\"name\":\"play\"}})],1),_c('div',{staticClass:\"position-bottom\"},[_c('van-icon',{staticStyle:{\"transform\":\"translateY(2px)\"},attrs:{\"name\":\"search\"}}),_c('router-link',{attrs:{\"to\":\"/search\",\"tag\":\"span\"}},[_vm._v(\"搜索商家、商品名称\")])],1)]),_c('section',{staticClass:\"slider-container\"},[_c('svg',{staticStyle:{\"position\":\"absolute\",\"width\":\"0\",\"height\":\"0\"},attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\"}},[_c('defs',[_c('symbol',{attrs:{\"id\":\"list-item\"}},[_c('circle',{attrs:{\"cx\":\"50%\",\"cy\":\"30%\",\"r\":\"20%\",\"stroke\":\"#eee\",\"stroke-width\":\"1\",\"fill\":\"#ddd\"}}),_c('rect',{staticStyle:{\"fill\":\"#ddd\",\"stroke-width\":\"1\",\"stroke\":\"#eee\",\"transform\":\"translate(30%, 65%)\"},attrs:{\"width\":\"40%\",\"height\":\"30%\"}})])])]),(!_vm.foodTypes.length)?_c('div',{staticClass:\"slider preview\"},[_c('ul',{staticClass:\"clear\"},_vm._l((8),function(item){return _c('li',{key:item,staticClass:\"list-style\"},[_c('svg',{staticClass:\"list-item\"},[_c('use',{attrs:{\"xlink:href\":\"#list-item\"}})])])}),0)]):_c('div',{staticClass:\"slider\"},[(_vm.foodTypes.length)?_c('van-swipe',{attrs:{\"autoplay\":3000,\"indicator-color\":\"#01a3f8\"}},_vm._l((_vm.foodTypes),function(item,index){return _c('van-swipe-item',{key:index},[_c('ul',{staticClass:\"clear\"},_vm._l((item),function(value){return _c('li',{key:value.id,staticClass:\"list-style\"},[_c('router-link',{attrs:{\"to\":{path: '/food', query: {geohash: _vm.geohash, title: value.title, restaurant_category_id: _vm.getCategoryId(value.link)}}}},[_c('img',{attrs:{\"src\":_vm.imgBaseUrl + value.image_url}}),_c('span',[_vm._v(_vm._s(value.title))])])],1)}),0)])}),1):_vm._e()],1)]),(_vm.foodTypes.length)?_c('section',{ref:\"food\",staticClass:\"food\",class:[_vm.typeFlag?'food-fixed':'food-absolute']},[_c('v-food',{on:{\"changeStyle\":_vm.changeStyle}},[_c('h3',{staticClass:\"shop-title\",attrs:{\"slot\":\"shopTitle\"},slot:\"shopTitle\"},[_vm._v(\"—— 推荐商家 ——\")])])],1):_vm._e(),(_vm.location)?_c('v-shoplist',{staticClass:\"shoplist\",attrs:{\"loadMoreFlag\":_vm.loadMoreFlag}}):_vm._e(),_c('v-footer'),_c('van-overlay',{attrs:{\"show\":_vm.showCover},on:{\"click\":_vm.closeCover}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"home\" ref=\"home\" id=\"home\" @scroll=\"handleScroll\">\r\n    <div v-show=\"!location\">\r\n      <van-dialog\r\n        v-model=\"show\"\r\n        title=\"标题\"\r\n        show-cancel-button\r\n        cancel-button-text=\"不允许\"\r\n        confirm-button-text=\"好\"\r\n        message=\"'饿了么'想获取您的当前位置\"\r\n        @confirm=\"getCity\"\r\n      ></van-dialog>\r\n    </div>\r\n    <header class=\"position-nav\" :style=\"{position: positionStatus}\">\r\n      <div class=\"position-top ellipsis\" v-show=\"showStatus\" ref=\"positionTop\" @click=\"goCity\">\r\n        <van-icon name=\"location\" class=\"icon\" />\r\n        <span>{{positionText}}</span>\r\n        <van-icon name=\"play\" style=\"transform: rotate(90deg)\" class=\"icon\" />\r\n      </div>\r\n      <div class=\"position-bottom\">\r\n        <van-icon name=\"search\" style=\"transform: translateY(2px)\" />\r\n        <router-link to=\"/search\" tag=\"span\">搜索商家、商品名称</router-link>\r\n      </div>\r\n    </header>\r\n    <section class=\"slider-container\">\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n        style=\"position:absolute;width:0;height:0\"\r\n      >\r\n        <defs>\r\n          <symbol id=\"list-item\">\r\n            <circle cx=\"50%\" cy=\"30%\" r=\"20%\" stroke=\"#eee\" stroke-width=\"1\" fill=\"#ddd\" />\r\n            <rect\r\n              width=\"40%\"\r\n              height=\"30%\"\r\n              style=\"fill:#ddd;stroke-width:1; stroke:#eee;transform:translate(30%, 65%)\"\r\n            />\r\n          </symbol>\r\n        </defs>\r\n      </svg>\r\n      <div class=\"slider preview\" v-if=\"!foodTypes.length\">\r\n        <ul class=\"clear\">\r\n          <li class=\"list-style\" v-for=\"item in 8\" :key=\"item\">\r\n            <svg class=\"list-item\">\r\n              <use xlink:href=\"#list-item\" />\r\n            </svg>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <div class=\"slider\" v-else>\r\n        <van-swipe :autoplay=\"3000\" indicator-color=\"#01a3f8\" v-if=\"foodTypes.length\">\r\n          <van-swipe-item v-for=\"(item, index) in foodTypes\" :key=\"index\">\r\n            <ul class=\"clear\">\r\n              <li class=\"list-style\" v-for=\"value in item\" :key=\"value.id\">\r\n                <router-link\r\n                  :to=\"{path: '/food', query: {geohash, title: value.title, restaurant_category_id: getCategoryId(value.link)}}\"\r\n                >\r\n                  <img :src=\"imgBaseUrl + value.image_url\" />\r\n                  <span>{{value.title}}</span>\r\n                </router-link>\r\n              </li>\r\n            </ul>\r\n          </van-swipe-item>\r\n        </van-swipe>\r\n      </div>\r\n    </section>\r\n    <section\r\n      class=\"food\"\r\n      :class=\"[typeFlag?'food-fixed':'food-absolute']\"\r\n      v-if=\"foodTypes.length\"\r\n      ref=\"food\"\r\n    >\r\n      <v-food @changeStyle=\"changeStyle\">\r\n        <h3 slot=\"shopTitle\" class=\"shop-title\">—— 推荐商家 ——</h3>\r\n      </v-food>\r\n    </section>\r\n    <v-shoplist v-if=\"location\" class=\"shoplist\" :loadMoreFlag=\"loadMoreFlag\" />\r\n    <v-footer />\r\n    <van-overlay :show=\"showCover\" @click=\"closeCover\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from \"vuex\";\r\nimport vFood from \"@/components/food/food\";\r\nimport vShoplist from \"@/components/shoplist/shoplist\";\r\nimport vFooter from \"@/components/footer/footer\";\r\nimport {\r\n  reqCurrentPosition,\r\n  reqDetailPosition,\r\n  reqHotCity,\r\n  msiteFoodTypes\r\n} from \"@/api/index\";\r\nexport default {\r\n  components: {\r\n    vFood,\r\n    vShoplist,\r\n    vFooter\r\n  },\r\n  data() {\r\n    return {\r\n      positionStatus: \"absolute\", //定位fixed或者relatives\r\n      showStatus: true, //是否定位元素显示高度\r\n      show: true,\r\n      positionText: \"正在定位...\",\r\n      imgBaseUrl: \"https://fuss10.elemecdn.com\", //图片域名地址\r\n      foodTypes: [], //食品分类列表\r\n      geohash: \"\", // 地址geohash\r\n      loading: true, //默认不显示\r\n      foodPosition: \"relative\",\r\n      categoryNavheight: 0, //分类导航栏的位置\r\n      topNavheight: \"\", //头部定位标签的高度\r\n      typeFlag: false, //根据类名判断分类标签的样式\r\n      showCover: false, //显示遮挡层\r\n      shopListHeight: \"\", // 食品列表的高度\r\n      loadMoreFlag: 0 //加载更多商品标志\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\"foodInfo\",\"location\"])\r\n  },\r\n  watch: {\r\n    foodInfo: function(newval) {\r\n      // 判断遮挡层是否显示,当分类存在状态时才显示,否则不显示\r\n      const { sortBy } = newval;\r\n      if (sortBy) {\r\n        this.showCover = true;\r\n      } else {\r\n        this.showCover = false;\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initData();\r\n  },\r\n  methods: {\r\n    ...mapActions([\"getFoodInfo\", \"getAddressInfo\"]),\r\n    initData() {\r\n      if (this.location) {\r\n        this.positionText = this.location.address;\r\n        this.geohash = this.location.latitude + \",\" + this.location.longitude;\r\n        this.getFoodTypesArr(this.geohash);\r\n      }\r\n    },\r\n    //滚动触发事件\r\n    handleScroll() {\r\n      // 获取定位元素的高度\r\n      if (!this.topNavheight) {\r\n        this.topNavheight = this.$refs.positionTop.offsetHeight;\r\n      }\r\n      //获取页面滚动出去的高度\r\n      const scrollTop = this.$refs.home.scrollTop;\r\n      const scrollHeight = this.$refs.home.scrollHeight;\r\n      if (scrollTop > this.topNavheight) {\r\n        this.positionStatus = \"fixed\";\r\n        this.showStatus = false;\r\n      } else {\r\n        this.positionStatus = \"absolute\";\r\n        this.showStatus = true;\r\n      }\r\n\r\n      // 保存页面初始状态信息\r\n      if (this.categoryNavheight == 0) {\r\n        this.categoryNavheight = this.$refs.food.offsetTop;\r\n      }\r\n      // 改变食品分类所在的位置\r\n      if (scrollTop > this.categoryNavheight) {\r\n        this.typeFlag = true;\r\n      } else {\r\n        this.typeFlag = false;\r\n      }\r\n      // 当页面滚动至页面最底部时加载更多\r\n      if (document.body.clientHeight + scrollTop >= scrollHeight) {\r\n        this.loadMoreFlag++;\r\n      }\r\n    },\r\n    //获取当前城市地址\r\n    async getCity() {\r\n      this.positionText = \"正在获取位置...\";\r\n      const result = await reqDetailPosition();\r\n      const position = result.data;\r\n      console.log(position)\r\n      if (!position.address) {\r\n        this.positionText = \"定位不准,请重新获取\";\r\n        return;\r\n      } else {\r\n        this.positionText = position.address;\r\n      }\r\n\r\n      this.geohash = position.latitude + \",\" + position.longitude;\r\n      //获取食品分类列表\r\n      this.getFoodTypesArr(this.geohash);\r\n\r\n      // 保存到vuex中\r\n      this.getAddressInfo(position);\r\n      console.log(this.location)\r\n    },\r\n    //获取食品分类列表\r\n    async getFoodTypesArr(geohash) {\r\n      const result = await msiteFoodTypes(geohash);\r\n\r\n      const category = result.data;\r\n      let resLength = category.length;\r\n      let resArr = [...category]; // 返回一个新的数组\r\n      let foodArr = [];\r\n      for (let i = 0, j = 0; i < resLength; i += 8, j++) {\r\n        foodArr[j] = resArr.splice(0, 8);\r\n      }\r\n      this.foodTypes = foodArr;\r\n      console.log(this.foodTypes)\r\n    },\r\n\r\n    //点击排序按钮时对商品列表进行排序,筛选\r\n    changeStyle() {\r\n      // 保存页面初始状态信息\r\n      if (this.categoryNavheight == 0) {\r\n        this.categoryNavheight = this.$refs.food.offsetTop;\r\n      }\r\n      //当食品列表大于窗口可视区域高度时, food元素节点位置样式发生改变,变为绝对定位\r\n      //分类样式改变\r\n      this.typeFlag = true;\r\n      // 页面滚动到分类位置,当两者完全相等时,会导致布局变为相对定位,故而加一\r\n      this.$refs.home.scrollTop = this.categoryNavheight + 1;\r\n    },\r\n    // 判断是否需要变化位置\r\n    getShoplistHeight(height) {\r\n      this.shopListHeight = height;\r\n    },\r\n    // 当点击遮挡层时,关闭食品下拉列表\r\n    closeCover() {\r\n      this.showCover = false;\r\n      this.getFoodInfo();\r\n    },\r\n    goCity() {\r\n      this.$router.push(\"/address\");\r\n    },\r\n    // 解码url地址，求去restaurant_category_id值\r\n    getCategoryId(url) {\r\n      //   let urlData = decodeURIComponent(\r\n      //     url.split(\"=\")[1].replace(\"&target_name\", \"\")\r\n      //   );\r\n      //   if (/restaurant_category_id/gi.test(urlData)) {\r\n      //     return JSON.parse(urlData).restaurant_category_id.id;\r\n      //   } else {\r\n      //     return \"\";\r\n      //   }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.home {\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  position: absolute;\r\n  .position-nav {\r\n    width: 100%;\r\n    padding: 5px 10px;\r\n    background-color: #01a3f8;\r\n    z-index: 10;\r\n    .position-top {\r\n      height: 30px;\r\n      max-width: 50%;\r\n      line-height: 30px;\r\n      color: #fff;\r\n      span {\r\n        margin: 0 5px;\r\n      }\r\n      .icon {\r\n        font-size: 14px;\r\n      }\r\n    }\r\n    .position-bottom {\r\n      height: 30px;\r\n      margin: 5px 10px;\r\n      font-size: 14px;\r\n      line-height: 30px;\r\n      text-align: center;\r\n      color: #aaa;\r\n      background-color: #fff;\r\n    }\r\n  }\r\n  .slider-container {\r\n    margin-top: 85px;\r\n    .slider {\r\n      width: 100%;\r\n      padding: 5px 0;\r\n      background-color: #fff;\r\n      .list-style {\r\n        float: left;\r\n        width: 25%;\r\n        height: 60px;\r\n        text-align: center;\r\n        .list-item {\r\n          width: 100%;\r\n          height: 100%;\r\n        }\r\n        img {\r\n          display: block;\r\n          width: 60%;\r\n          height: 60%;\r\n          margin: auto;\r\n        }\r\n        span {\r\n          color: #666;\r\n          font-size: 12px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .food-fixed {\r\n    position: fixed;\r\n    top: 0;\r\n    z-index: 9;\r\n    height: 100px;\r\n    width: 100%;\r\n  }\r\n  .food-absolute {\r\n    position: absolute;\r\n    height: 100px;\r\n    width: 100%;\r\n    z-index: 9;\r\n  }\r\n  .shop-title {\r\n    height: 50px;\r\n    line-height: 50px;\r\n    background-color: #fff;\r\n    text-align: center;\r\n  }\r\n  .shoplist {\r\n    padding-top: 100px;\r\n    padding-bottom: 50px;\r\n  }\r\n  .loading {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    text-align: center;\r\n    z-index: 20;\r\n    .loading-animate {\r\n      position: absolute;\r\n      top: 50%;\r\n      left: 50%;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./home.vue?vue&type=template&id=277bc812&scoped=true&\"\nimport script from \"./home.vue?vue&type=script&lang=js&\"\nexport * from \"./home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./home.vue?vue&type=style&index=0&id=277bc812&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"277bc812\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./home.vue?vue&type=style&index=0&id=277bc812&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./home.vue?vue&type=style&index=0&id=277bc812&lang=scss&scoped=true&\""],"sourceRoot":""}