(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72efbc30"],{"2c4b":function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[o("van-tabbar-item",{attrs:{icon:"home-o",to:"/home",name:"/home"}},[t._v("首页")]),o("van-tabbar-item",{attrs:{icon:"balance-list-o",to:"/order",name:"/order"}},[t._v("订单")]),o("van-tabbar-item",{attrs:{icon:"setting-o",to:"/user/main",name:"/user/main"}},[t._v("我的")])],1)},i=[],a={data:function(){return{active:this.$route.path}}},n=a,r=(o("afab"),o("2877")),c=Object(r["a"])(n,s,i,!1,null,"5b69ea1b",null);e["a"]=c.exports},"31c5":function(t,e,o){},afab:function(t,e,o){"use strict";var s=o("31c5"),i=o.n(s);i.a},b837:function(t,e,o){},ddad:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{ref:"home",staticClass:"home",attrs:{id:"home"},on:{scroll:t.handleScroll}},[o("div",{directives:[{name:"show",rawName:"v-show",value:!t.location,expression:"!location"}]},[o("van-dialog",{attrs:{title:"标题","show-cancel-button":"","cancel-button-text":"不允许","confirm-button-text":"好",message:"'饿了么'想获取您的当前位置"},on:{confirm:t.getCity},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1),o("header",{staticClass:"position-nav",style:{position:t.positionStatus}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.showStatus,expression:"showStatus"}],ref:"positionTop",staticClass:"position-top ellipsis",on:{click:t.goCity}},[o("van-icon",{staticClass:"icon",attrs:{name:"location"}}),o("span",[t._v(t._s(t.positionText))]),o("van-icon",{staticClass:"icon",staticStyle:{transform:"rotate(90deg)"},attrs:{name:"play"}})],1),o("div",{staticClass:"position-bottom"},[o("van-icon",{staticStyle:{transform:"translateY(2px)"},attrs:{name:"search"}}),o("router-link",{attrs:{to:"/search",tag:"span"}},[t._v("搜索商家、商品名称")])],1)]),o("section",{staticClass:"slider-container"},[o("svg",{staticStyle:{position:"absolute",width:"0",height:"0"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[o("defs",[o("symbol",{attrs:{id:"list-item"}},[o("circle",{attrs:{cx:"50%",cy:"30%",r:"20%",stroke:"#eee","stroke-width":"1",fill:"#ddd"}}),o("rect",{staticStyle:{fill:"#ddd","stroke-width":"1",stroke:"#eee",transform:"translate(30%, 65%)"},attrs:{width:"40%",height:"30%"}})])])]),t.foodTypes.length?o("div",{staticClass:"slider"},[t.foodTypes.length?o("van-swipe",{attrs:{autoplay:3e3,"indicator-color":"#01a3f8"}},t._l(t.foodTypes,(function(e,s){return o("van-swipe-item",{key:s},[o("ul",{staticClass:"clear"},t._l(e,(function(e){return o("li",{key:e.id,staticClass:"list-style"},[o("router-link",{attrs:{to:{path:"/food",query:{geohash:t.geohash,title:e.title,restaurant_category_id:t.getCategoryId(e.link)}}}},[o("img",{attrs:{src:t.imgBaseUrl+e.image_url}}),o("span",[t._v(t._s(e.title))])])],1)})),0)])})),1):t._e()],1):o("div",{staticClass:"slider preview"},[o("ul",{staticClass:"clear"},t._l(8,(function(t){return o("li",{key:t,staticClass:"list-style"},[o("svg",{staticClass:"list-item"},[o("use",{attrs:{"xlink:href":"#list-item"}})])])})),0)])]),t.foodTypes.length?o("section",{ref:"food",staticClass:"food",class:[t.typeFlag?"food-fixed":"food-absolute"]},[o("v-food",{on:{changeStyle:t.changeStyle}},[o("h3",{staticClass:"shop-title",attrs:{slot:"shopTitle"},slot:"shopTitle"},[t._v("—— 推荐商家 ——")])])],1):t._e(),t.location?o("v-shoplist",{staticClass:"shoplist",attrs:{loadMoreFlag:t.loadMoreFlag}}):t._e(),o("v-footer"),o("van-overlay",{attrs:{show:t.showCover},on:{click:t.closeCover}})],1)},i=[],a=(o("a4d3"),o("4de4"),o("a434"),o("e439"),o("dbb4"),o("b64b"),o("159b"),o("2909")),n=(o("96cf"),o("1da1")),r=o("ade3"),c=o("2f62"),l=o("0f29"),h=o("7387"),u=o("2c4b"),f=o("365c");function d(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,s)}return o}function p(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?d(Object(o),!0).forEach((function(e){Object(r["a"])(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var g={components:{vFood:l["a"],vShoplist:h["a"],vFooter:u["a"]},data:function(){return{positionStatus:"absolute",showStatus:!0,show:!0,positionText:"正在定位...",imgBaseUrl:"https://fuss10.elemecdn.com",foodTypes:[],geohash:"",loading:!0,foodPosition:"relative",categoryNavheight:0,topNavheight:"",typeFlag:!1,showCover:!1,shopListHeight:"",loadMoreFlag:0}},computed:p({},Object(c["c"])(["foodInfo","location"])),watch:{foodInfo:function(t){var e=t.sortBy;this.showCover=!!e}},mounted:function(){this.initData()},methods:p({},Object(c["b"])(["getFoodInfo","getAddressInfo"]),{initData:function(){this.location&&(this.positionText=this.location.address,this.geohash=this.location.latitude+","+this.location.longitude,this.getFoodTypesArr(this.geohash))},handleScroll:function(){this.topNavheight||(this.topNavheight=this.$refs.positionTop.offsetHeight);var t=this.$refs.home.scrollTop,e=this.$refs.home.scrollHeight;t>this.topNavheight?(this.positionStatus="fixed",this.showStatus=!1):(this.positionStatus="absolute",this.showStatus=!0),0==this.categoryNavheight&&(this.categoryNavheight=this.$refs.food.offsetTop),t>this.categoryNavheight?this.typeFlag=!0:this.typeFlag=!1,document.body.clientHeight+t>=e&&this.loadMoreFlag++},getCity:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.positionText="正在获取位置...",t.next=3,Object(f["r"])();case 3:if(e=t.sent,o=e.data,console.log(o),o.address){t.next=11;break}return this.positionText="定位不准,请重新获取",t.abrupt("return");case 11:this.positionText=o.address;case 12:this.geohash=o.latitude+","+o.longitude,this.getFoodTypesArr(this.geohash),this.getAddressInfo(o),console.log(this.location);case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getFoodTypesArr:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var o,s,i,n,r,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(f["l"])(e);case 2:for(o=t.sent,s=o.data,i=s.length,n=Object(a["a"])(s),r=[],c=0,l=0;c<i;c+=8,l++)r[l]=n.splice(0,8);this.foodTypes=r,console.log(this.foodTypes);case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),changeStyle:function(){0==this.categoryNavheight&&(this.categoryNavheight=this.$refs.food.offsetTop),this.typeFlag=!0,this.$refs.home.scrollTop=this.categoryNavheight+1},getShoplistHeight:function(t){this.shopListHeight=t},closeCover:function(){this.showCover=!1,this.getFoodInfo()},goCity:function(){this.$router.push("/address")},getCategoryId:function(t){}})},v=g,b=(o("f6f5"),o("2877")),y=Object(b["a"])(v,s,i,!1,null,"277bc812",null);e["default"]=y.exports},f6f5:function(t,e,o){"use strict";var s=o("b837"),i=o.n(s);i.a}}]);
//# sourceMappingURL=chunk-72efbc30.1207129e.js.map